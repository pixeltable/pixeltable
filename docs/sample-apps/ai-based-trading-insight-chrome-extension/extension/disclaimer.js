// Legal Disclaimer Text

const LEGAL_DISCLAIMER = `
IMPORTANT NOTICE: PLEASE READ THIS DISCLAIMER CAREFULLY

1. NO FINANCIAL ADVICE
The AI Trading Navigator ("the Extension") is a technological tool that provides automated analysis of trading charts. The Extension, its developers, Pixeltable, and all affiliated parties DO NOT provide financial advice, investment recommendations, or trading guidance. All information, analysis, signals, and indicators provided by the Extension are for informational and educational purposes ONLY.

2. NO GUARANTEE OF ACCURACY
The technical analysis, patterns, indicators, and trading signals generated by the Extension:
   - Are based on algorithmic interpretations and artificial intelligence
   - May be incomplete, inaccurate, or erroneous
   - Should not be considered as guarantees of future market behavior
   - Are NOT real-time and may be delayed
   - Should NEVER be used as the sole basis for any investment decision

3. HIGH-RISK WARNING
Trading and investing in financial markets involves substantial risk of loss:
   - You may lose some or all of your invested capital
   - Past performance is not indicative of future results
   - Technical analysis tools cannot predict future market movements
   - Market conditions can change rapidly and without warning

4. USER RESPONSIBILITY
By using this Extension, you acknowledge and agree that:
   - You are solely responsible for your trading and investment decisions
   - You will conduct your own due diligence before making any investment
   - You will seek advice from qualified financial professionals
   - You will not rely exclusively on information provided by this Extension
   - You have sufficient knowledge and experience to evaluate market risks
   - You can afford the high risk of losing money in financial markets

5. LIABILITY LIMITATION
To the maximum extent permitted by law:
   - We disclaim all warranties, express or implied
   - We are not liable for any losses, damages, or costs arising from:
     * Use or inability to use the Extension
     * Trading decisions made based on the Extension
     * Technical failures or data inaccuracies
     * Market losses or missed opportunities
     * Any direct, indirect, incidental, or consequential damages

6. JURISDICTIONAL RESTRICTIONS
Users are responsible for:
   - Compliance with local laws and regulations
   - Determining their eligibility to use trading tools
   - Understanding and following applicable securities laws
   - Reporting and paying any relevant taxes

7. NO BROKER-DEALER RELATIONSHIP
The Extension:
   - Is NOT a registered broker-dealer
   - Is NOT a registered investment advisor
   - Does NOT provide personalized trading strategies
   - Does NOT execute trades or handle funds

8. INTELLECTUAL PROPERTY
The analysis methods, algorithms, and technical indicators:
   - May be protected by patents or pending patent applications
   - Do not guarantee specific results or performance
   - Should not be reverse-engineered or redistributed

9. DATA ACCURACY DISCLAIMER
Market data and analysis:
   - May be delayed or inaccurate
   - Should be verified with your trading platform
   - May not reflect actual market conditions
   - Is provided "AS IS" without any warranty

10. MODIFICATION OF TERMS
We reserve the right to:
   - Modify this disclaimer at any time
   - Update the Extension's functionality
   - Discontinue services without prior notice

BY USING THIS EXTENSION, YOU EXPLICITLY AGREE TO ALL TERMS OF THIS DISCLAIMER. IF YOU DO NOT AGREE, DO NOT USE THE EXTENSION.

Last Updated: ${new Date().toISOString().split('T')[0]}
`;

// Function to display disclaimer and get user acknowledgment
function showDisclaimer() {
    return new Promise((resolve) => {
        const modal = document.createElement('div');
        modal.className = 'disclaimer-modal';
        modal.innerHTML = `
            <div class="disclaimer-content">
                <h2>Legal Disclaimer</h2>
                <div class="disclaimer-text">
                    ${LEGAL_DISCLAIMER.replace(/\n/g, '<br>')}
                </div>
                <div class="disclaimer-actions">
                    <label>
                        <input type="checkbox" id="disclaimer-checkbox">
                        I have read, understood, and agree to the above disclaimer
                    </label>
                    <button id="accept-disclaimer" disabled>Accept & Continue</button>
                </div>
            </div>
        `;

        document.body.appendChild(modal);

        const checkbox = document.getElementById('disclaimer-checkbox');
        const acceptButton = document.getElementById('accept-disclaimer');

        checkbox.addEventListener('change', () => {
            acceptButton.disabled = !checkbox.checked;
        });

        acceptButton.addEventListener('click', () => {
            localStorage.setItem('disclaimerAccepted', new Date().toISOString());
            modal.remove();
            resolve(true);
        });
    });
}

// Function to check if disclaimer needs to be shown
function checkDisclaimerStatus() {
    const accepted = localStorage.getItem('disclaimerAccepted');
    const lastUpdate = '2024-03-30'; // Update this when disclaimer changes

    if (!accepted || new Date(accepted) < new Date(lastUpdate)) {
        return showDisclaimer();
    }
    return Promise.resolve(true);
}

// Export for use in extension
export { checkDisclaimerStatus, LEGAL_DISCLAIMER };