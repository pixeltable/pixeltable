---
title: "Queries and Expressions"
icon: "notebook"
description: "[Open in Kaggle](https://kaggle.com/kernels/welcome?src=https://github.com/pixeltable/pixeltable/blob/release/docs/notebooks/fundamentals/queries-and-expressions.ipynb) | [Open in Colab](https://colab.research.google.com/github/pixeltable/pixeltable/blob/release/docs/notebooks/fundamentals/queries-and-expressions.ipynb) | [View on GitHub](https://github.com/pixeltable/pixeltable/blob/release/docs/notebooks/fundamentals/queries-and-expressions.ipynb)"
---

export const quartoRawHtml =
[`
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr style="text-align: right;">
<th data-quarto-table-cell-role="th">image</th>
<th data-quarto-table-cell-role="th">label</th>
</tr>
</thead>
<tbody>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRjQBAABXRUJQVlA4ICgBAADQBwCdASocABwAPm0wk0ckIyGhKAqogA2JaQATgDkgzcc0Q/qv5Mz5jyK/LHsAfqH/nE8VZwAZu/HNrmpfPK9PqD2yiBgAAAD+/5KsWrCrq9/+//uA5BBHAanH6EKeyCUbw/JEgElql69/9PFyh5Of0/yJ/g1hJ4xNv2eQvCf8fZCYANnho/vwZ88x1zLxm0uHAAqzErrn/ehXSb8I91evqhdrxJv+t+MJ+LAdoxg52UMCJO9asqLG74qmRFwBtwYmLD1qdhs5gA1+mxfu7DEmhoP3Zse+KW10ZX08J4wbCO4c25065frFQq3OieIh4HN9Tigr1hbBN7TjDDNqOJ0yiJXf11Zk6nwdufeBnF1Z3f+1x3lqj0oxvGQ3cBj382LzdHIrvMgAAA=="
width="28" />
</div></td>
<td>5</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRiQBAABXRUJQVlA4IBgBAADwBwCdASocABwAPm0skEWkIqGYDAYAQAbEtIAIo/9QxwP7NnAHPuZr3mb/VeqL6M3Uq/qqW6nbIzaK/81eOzr0bbbxa+zvuAAA/v72Q3GuFGAD647Uhmi3XcgQoGdu0UqHvqH8f30LmVKupO/7WTRq0i24h/jgzohv3bnndohaOxGyqEvvOYAikAolsRjBMDfq6CaATYlYkJj5P/PYajfMb9AfbAhm9Tb4cPtzk32RJAR8zay3gK9xkPfYZLRnpq6918mnv0b5l1WuWF2hbwAWlTnpuH/DSgnL/d0Q57IMv/CedTiJ75/5zGe/m3/ZfszdKN5Gy3+Tfp3YPZfgmQrK7609nrUsVVoK+tqvi745MvFFZGSRQAAA"
width="28" />
</div></td>
<td>0</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRgwBAABXRUJQVlA4IAABAADQBgCdASocABwAPmUokEWkIqGYBgBABkS0gAiDWOn/O64Fyc6bdzM/mb0Rf9eMy0WJdalc1libkAWW2NVxNuAA/v64QCovblKmg0f+W0ZZcARl3VFwt3Me2//WBL3XQG9jFMtCbP2/7/8iAx77/63rAOXqXQb4/5fxOfX6dhbdz8RiUBPDGYm3+0zQKd/yJ6nJ/wrrs3PTXnKnmhhuYU8Uxq490SSosQ+XKNkTuELTWbEWLmHhkQyX+ztvzsu2W9YIvpnCZdQJmbCatf/VLzMynv3//DX7wD/xwBwquIjgKds5cDEzbicXGdkuM37Yt4ancr9u1dBaSMfI0UVgoAAA"
width="28" />
</div></td>
<td>4</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRsQAAABXRUJQVlA4ILgAAADwBACdASocABwAPmEojkWkIqEb/VQAQAYEtIACIJfpf53anfwh5bFxZyxmg4dIzIAA/v8aTg5Pf4AaLvDOb2+nBLe7h4WLP4eah5+VtiBuH5fnAK/9o/+/4nl+i/XuYMSDuGzWvPP7PeYAYqDelo/gGeaJWXI9qBrwbupRut1RmHAmjHeJdu952t5DneGb8d1NHD67m1X/4Fr/ktLUCjUDM3A9y/Tmv/u48GyVebp9QUFiS+qkAAAA"
width="28" />
</div></td>
<td>1</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRhIBAABXRUJQVlA4IAYBAAAQBwCdASocABwAPmkqkEWkIqGYBgBABoS0gAiDrbQKlm9OvPM8p+ijvgH6ADs18j7y7UsovRG992j1lWJXI+NjsAD+/p9i31NdsRkVHtTBTbgEfcsiV5cS5IfF+yS7MDdvlaSHRre6nuYBWIGIMPNc7//PKE5FDkecaPH1C5KuSA/FmB0Mw15jQ4M0b5oct9Sv71vHA8P6IA5GrLvUA+xjJCnISNNaYSiHVONthArmojGAh1x2X9w6ER0Oe1Yqh//8NUVB//4iTpFaItcumEp4Ryr+jO63PtCFdy7qk9dlTU9Mno2GIXYCVLSAkv7l2L/rqd15c4R/MS1/O/u2yTOuN7uvmCQA"
width="28" />
</div></td>
<td>9</td>
</tr>
</tbody>
</table>
`,`<style type="text/css">
#T_e1c86_row0_col0 {
  white-space: pre-wrap;
  text-align: left;
  font-weight: bold;
}
</style>
`,`
<table id="T_e1c86" data-quarto-postprocess="true">
<tbody>
<tr>
<td id="T_e1c86_row0_col0" class="data row0 col0">Column 'image' (of
table 'demo.mnist')</td>
</tr>
</tbody>
</table>
`,`
<style type="text/css">
#T_c4748 th {
  text-align: left;
}
#T_c4748_row0_col0, #T_c4748_row0_col1, #T_c4748_row0_col2 {
  white-space: pre-wrap;
  text-align: left;
}
</style>
`,`
<table id="T_c4748" data-quarto-postprocess="true">
<thead>
<tr>
<th id="T_c4748_level0_col0" class="col_heading level0 col0"
data-quarto-table-cell-role="th">Column Name</th>
<th id="T_c4748_level0_col1" class="col_heading level0 col1"
data-quarto-table-cell-role="th">Type</th>
<th id="T_c4748_level0_col2" class="col_heading level0 col2"
data-quarto-table-cell-role="th">Computed With</th>
</tr>
</thead>
<tbody>
<tr>
<td id="T_c4748_row0_col0" class="data row0 col0">image</td>
<td id="T_c4748_row0_col1" class="data row0 col1">Image</td>
<td id="T_c4748_row0_col2" class="data row0 col2"></td>
</tr>
</tbody>
</table>
`,`
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr style="text-align: right;">
<th data-quarto-table-cell-role="th">image</th>
<th data-quarto-table-cell-role="th">classification</th>
</tr>
</thead>
<tbody>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRjQBAABXRUJQVlA4ICgBAADQBwCdASocABwAPm0wk0ckIyGhKAqogA2JaQATgDkgzcc0Q/qv5Mz5jyK/LHsAfqH/nE8VZwAZu/HNrmpfPK9PqD2yiBgAAAD+/5KsWrCrq9/+//uA5BBHAanH6EKeyCUbw/JEgElql69/9PFyh5Of0/yJ/g1hJ4xNv2eQvCf8fZCYANnho/vwZ88x1zLxm0uHAAqzErrn/ehXSb8I91evqhdrxJv+t+MJ+LAdoxg52UMCJO9asqLG74qmRFwBtwYmLD1qdhs5gA1+mxfu7DEmhoP3Zse+KW10ZX08J4wbCO4c25065frFQq3OieIh4HN9Tigr1hbBN7TjDDNqOJ0yiJXf11Zk6nwdufeBnF1Z3f+1x3lqj0oxvGQ3cBj382LzdHIrvMgAAA=="
width="28" />
</div></td>
<td>{"labels": [5, 3, 2, 8, 7], "scores": [0.981, 0.013, 0.002, 0.001,
0.001], "label_text": ["5", "3", "2", "8", "7"]}</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRiQBAABXRUJQVlA4IBgBAADwBwCdASocABwAPm0skEWkIqGYDAYAQAbEtIAIo/9QxwP7NnAHPuZr3mb/VeqL6M3Uq/qqW6nbIzaK/81eOzr0bbbxa+zvuAAA/v72Q3GuFGAD647Uhmi3XcgQoGdu0UqHvqH8f30LmVKupO/7WTRq0i24h/jgzohv3bnndohaOxGyqEvvOYAikAolsRjBMDfq6CaATYlYkJj5P/PYajfMb9AfbAhm9Tb4cPtzk32RJAR8zay3gK9xkPfYZLRnpq6918mnv0b5l1WuWF2hbwAWlTnpuH/DSgnL/d0Q57IMv/CedTiJ75/5zGe/m3/ZfszdKN5Gy3+Tfp3YPZfgmQrK7609nrUsVVoK+tqvi745MvFFZGSRQAAA"
width="28" />
</div></td>
<td>{"labels": [0, 6, 9, 8, 1], "scores": [0.997, 0., 0., 0., 0.],
"label_text": ["0", "6", "9", "8", "1"]}</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRgwBAABXRUJQVlA4IAABAADQBgCdASocABwAPmUokEWkIqGYBgBABkS0gAiDWOn/O64Fyc6bdzM/mb0Rf9eMy0WJdalc1libkAWW2NVxNuAA/v64QCovblKmg0f+W0ZZcARl3VFwt3Me2//WBL3XQG9jFMtCbP2/7/8iAx77/63rAOXqXQb4/5fxOfX6dhbdz8RiUBPDGYm3+0zQKd/yJ6nJ/wrrs3PTXnKnmhhuYU8Uxq490SSosQ+XKNkTuELTWbEWLmHhkQyX+ztvzsu2W9YIvpnCZdQJmbCatf/VLzMynv3//DX7wD/xwBwquIjgKds5cDEzbicXGdkuM37Yt4ancr9u1dBaSMfI0UVgoAAA"
width="28" />
</div></td>
<td>{"labels": [4, 1, 9, 7, 0], "scores": [0.997, 0.001, 0., 0., 0.],
"label_text": ["4", "1", "9", "7", "0"]}</td>
</tr>
</tbody>
</table>
`,`<style type="text/css">
#T_8753f_row0_col0 {
  white-space: pre-wrap;
  text-align: left;
  font-weight: bold;
}
</style>
`,`
<table id="T_8753f" data-quarto-postprocess="true">
<tbody>
<tr>
<td id="T_8753f_row0_col0" class="data row0 col0">Table
'demo.mnist'</td>
</tr>
</tbody>
</table>
`,`
<style type="text/css">
#T_6a6d3 th {
  text-align: left;
}
#T_6a6d3_row0_col0, #T_6a6d3_row0_col1, #T_6a6d3_row0_col2, #T_6a6d3_row1_col0, #T_6a6d3_row1_col1, #T_6a6d3_row1_col2, #T_6a6d3_row2_col0, #T_6a6d3_row2_col1, #T_6a6d3_row2_col2 {
  white-space: pre-wrap;
  text-align: left;
}
</style>
`,`
<table id="T_6a6d3" data-quarto-postprocess="true">
<thead>
<tr>
<th id="T_6a6d3_level0_col0" class="col_heading level0 col0"
data-quarto-table-cell-role="th">Column Name</th>
<th id="T_6a6d3_level0_col1" class="col_heading level0 col1"
data-quarto-table-cell-role="th">Type</th>
<th id="T_6a6d3_level0_col2" class="col_heading level0 col2"
data-quarto-table-cell-role="th">Computed With</th>
</tr>
</thead>
<tbody>
<tr>
<td id="T_6a6d3_row0_col0" class="data row0 col0">image</td>
<td id="T_6a6d3_row0_col1" class="data row0 col1">Image</td>
<td id="T_6a6d3_row0_col2" class="data row0 col2"></td>
</tr>
<tr>
<td id="T_6a6d3_row1_col0" class="data row1 col0">label</td>
<td id="T_6a6d3_row1_col1" class="data row1 col1">String</td>
<td id="T_6a6d3_row1_col2" class="data row1 col2"></td>
</tr>
<tr>
<td id="T_6a6d3_row2_col0" class="data row2 col0">classification</td>
<td id="T_6a6d3_row2_col1" class="data row2 col1">Json</td>
<td id="T_6a6d3_row2_col2"
class="data row2 col2">vit_for_image_classification(image,
model_id='farleyknight-org-username/vit-base-mnist')</td>
</tr>
</tbody>
</table>
`,`
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr style="text-align: right;">
<th data-quarto-table-cell-role="th">classification_labels</th>
</tr>
</thead>
<tbody>
<tr>
<td>[5, 3, 2, 8, 7]</td>
</tr>
<tr>
<td>[0, 6, 9, 8, 1]</td>
</tr>
<tr>
<td>[4, 1, 9, 7, 0]</td>
</tr>
</tbody>
</table>
`,`
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr style="text-align: right;">
<th data-quarto-table-cell-role="th">classification_labels</th>
</tr>
</thead>
<tbody>
<tr>
<td>[5, 3, 2, 8, 7]</td>
</tr>
<tr>
<td>[0, 6, 9, 8, 1]</td>
</tr>
<tr>
<td>[4, 1, 9, 7, 0]</td>
</tr>
</tbody>
</table>
`,`
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr style="text-align: right;">
<th data-quarto-table-cell-role="th">classification_labels0</th>
</tr>
</thead>
<tbody>
<tr>
<td>5</td>
</tr>
<tr>
<td>0</td>
</tr>
<tr>
<td>4</td>
</tr>
</tbody>
</table>
`,`
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr style="text-align: right;">
<th data-quarto-table-cell-role="th">classification_labels2</th>
</tr>
</thead>
<tbody>
<tr>
<td>[5, 3]</td>
</tr>
<tr>
<td>[0, 6]</td>
</tr>
<tr>
<td>[4, 1]</td>
</tr>
</tbody>
</table>
`,`
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr style="text-align: right;">
<th data-quarto-table-cell-role="th">classification_notakey</th>
</tr>
</thead>
<tbody>
<tr>
<td>None</td>
</tr>
<tr>
<td>None</td>
</tr>
<tr>
<td>None</td>
</tr>
</tbody>
</table>
`,`<style type="text/css">
#T_07fb9_row0_col0 {
  white-space: pre-wrap;
  text-align: left;
  font-weight: bold;
}
</style>
`,`
<table id="T_07fb9" data-quarto-postprocess="true">
<tbody>
<tr>
<td id="T_07fb9_row0_col0" class="data row0 col0">Table
'demo.mnist'</td>
</tr>
</tbody>
</table>
`,`
<style type="text/css">
#T_37376 th {
  text-align: left;
}
#T_37376_row0_col0, #T_37376_row0_col1, #T_37376_row0_col2, #T_37376_row1_col0, #T_37376_row1_col1, #T_37376_row1_col2, #T_37376_row2_col0, #T_37376_row2_col1, #T_37376_row2_col2, #T_37376_row3_col0, #T_37376_row3_col1, #T_37376_row3_col2 {
  white-space: pre-wrap;
  text-align: left;
}
</style>
`,`
<table id="T_37376" data-quarto-postprocess="true">
<thead>
<tr>
<th id="T_37376_level0_col0" class="col_heading level0 col0"
data-quarto-table-cell-role="th">Column Name</th>
<th id="T_37376_level0_col1" class="col_heading level0 col1"
data-quarto-table-cell-role="th">Type</th>
<th id="T_37376_level0_col2" class="col_heading level0 col2"
data-quarto-table-cell-role="th">Computed With</th>
</tr>
</thead>
<tbody>
<tr>
<td id="T_37376_row0_col0" class="data row0 col0">image</td>
<td id="T_37376_row0_col1" class="data row0 col1">Image</td>
<td id="T_37376_row0_col2" class="data row0 col2"></td>
</tr>
<tr>
<td id="T_37376_row1_col0" class="data row1 col0">label</td>
<td id="T_37376_row1_col1" class="data row1 col1">String</td>
<td id="T_37376_row1_col2" class="data row1 col2"></td>
</tr>
<tr>
<td id="T_37376_row2_col0" class="data row2 col0">classification</td>
<td id="T_37376_row2_col1" class="data row2 col1">Json</td>
<td id="T_37376_row2_col2"
class="data row2 col2">vit_for_image_classification(image,
model_id='farleyknight-org-username/vit-base-mnist')</td>
</tr>
<tr>
<td id="T_37376_row3_col0" class="data row3 col0">pred_label</td>
<td id="T_37376_row3_col1" class="data row3 col1">Json</td>
<td id="T_37376_row3_col2"
class="data row3 col2">classification.label_text[0]</td>
</tr>
</tbody>
</table>
`,`
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr style="text-align: right;">
<th data-quarto-table-cell-role="th">image</th>
<th data-quarto-table-cell-role="th">col_1</th>
</tr>
</thead>
<tbody>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRjQBAABXRUJQVlA4ICgBAADQBwCdASocABwAPm0wk0ckIyGhKAqogA2JaQATgDkgzcc0Q/qv5Mz5jyK/LHsAfqH/nE8VZwAZu/HNrmpfPK9PqD2yiBgAAAD+/5KsWrCrq9/+//uA5BBHAanH6EKeyCUbw/JEgElql69/9PFyh5Of0/yJ/g1hJ4xNv2eQvCf8fZCYANnho/vwZ88x1zLxm0uHAAqzErrn/ehXSb8I91evqhdrxJv+t+MJ+LAdoxg52UMCJO9asqLG74qmRFwBtwYmLD1qdhs5gA1+mxfu7DEmhoP3Zse+KW10ZX08J4wbCO4c25065frFQq3OieIh4HN9Tigr1hbBN7TjDDNqOJ0yiJXf11Zk6nwdufeBnF1Z3f+1x3lqj0oxvGQ3cBj382LzdHIrvMgAAA=="
width="28" />
</div></td>
<td>{"ground_truth": "5", "prediction": "5", "is_correct": true,
"engine": "pixeltable"}</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRiQBAABXRUJQVlA4IBgBAADwBwCdASocABwAPm0skEWkIqGYDAYAQAbEtIAIo/9QxwP7NnAHPuZr3mb/VeqL6M3Uq/qqW6nbIzaK/81eOzr0bbbxa+zvuAAA/v72Q3GuFGAD647Uhmi3XcgQoGdu0UqHvqH8f30LmVKupO/7WTRq0i24h/jgzohv3bnndohaOxGyqEvvOYAikAolsRjBMDfq6CaATYlYkJj5P/PYajfMb9AfbAhm9Tb4cPtzk32RJAR8zay3gK9xkPfYZLRnpq6918mnv0b5l1WuWF2hbwAWlTnpuH/DSgnL/d0Q57IMv/CedTiJ75/5zGe/m3/ZfszdKN5Gy3+Tfp3YPZfgmQrK7609nrUsVVoK+tqvi745MvFFZGSRQAAA"
width="28" />
</div></td>
<td>{"ground_truth": "0", "prediction": "0", "is_correct": true,
"engine": "pixeltable"}</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRgwBAABXRUJQVlA4IAABAADQBgCdASocABwAPmUokEWkIqGYBgBABkS0gAiDWOn/O64Fyc6bdzM/mb0Rf9eMy0WJdalc1libkAWW2NVxNuAA/v64QCovblKmg0f+W0ZZcARl3VFwt3Me2//WBL3XQG9jFMtCbP2/7/8iAx77/63rAOXqXQb4/5fxOfX6dhbdz8RiUBPDGYm3+0zQKd/yJ6nJ/wrrs3PTXnKnmhhuYU8Uxq490SSosQ+XKNkTuELTWbEWLmHhkQyX+ztvzsu2W9YIvpnCZdQJmbCatf/VLzMynv3//DX7wD/xwBwquIjgKds5cDEzbicXGdkuM37Yt4ancr9u1dBaSMfI0UVgoAAA"
width="28" />
</div></td>
<td>{"ground_truth": "4", "prediction": "4", "is_correct": true,
"engine": "pixeltable"}</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRsQAAABXRUJQVlA4ILgAAADwBACdASocABwAPmEojkWkIqEb/VQAQAYEtIACIJfpf53anfwh5bFxZyxmg4dIzIAA/v8aTg5Pf4AaLvDOb2+nBLe7h4WLP4eah5+VtiBuH5fnAK/9o/+/4nl+i/XuYMSDuGzWvPP7PeYAYqDelo/gGeaJWXI9qBrwbupRut1RmHAmjHeJdu952t5DneGb8d1NHD67m1X/4Fr/ktLUCjUDM3A9y/Tmv/u48GyVebp9QUFiS+qkAAAA"
width="28" />
</div></td>
<td>{"ground_truth": "1", "prediction": "1", "is_correct": true,
"engine": "pixeltable"}</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRhIBAABXRUJQVlA4IAYBAAAQBwCdASocABwAPmkqkEWkIqGYBgBABoS0gAiDrbQKlm9OvPM8p+ijvgH6ADs18j7y7UsovRG992j1lWJXI+NjsAD+/p9i31NdsRkVHtTBTbgEfcsiV5cS5IfF+yS7MDdvlaSHRre6nuYBWIGIMPNc7//PKE5FDkecaPH1C5KuSA/FmB0Mw15jQ4M0b5oct9Sv71vHA8P6IA5GrLvUA+xjJCnISNNaYSiHVONthArmojGAh1x2X9w6ER0Oe1Yqh//8NUVB//4iTpFaItcumEp4Ryr+jO63PtCFdy7qk9dlTU9Mno2GIXYCVLSAkv7l2L/rqd15c4R/MS1/O/u2yTOuN7uvmCQA"
width="28" />
</div></td>
<td>{"ground_truth": "9", "prediction": "9", "is_correct": true,
"engine": "pixeltable"}</td>
</tr>
</tbody>
</table>
`,`
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr style="text-align: right;">
<th data-quarto-table-cell-role="th">image</th>
<th data-quarto-table-cell-role="th">rot_label</th>
</tr>
</thead>
<tbody>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRjQBAABXRUJQVlA4ICgBAADQBwCdASocABwAPm0wk0ckIyGhKAqogA2JaQATgDkgzcc0Q/qv5Mz5jyK/LHsAfqH/nE8VZwAZu/HNrmpfPK9PqD2yiBgAAAD+/5KsWrCrq9/+//uA5BBHAanH6EKeyCUbw/JEgElql69/9PFyh5Of0/yJ/g1hJ4xNv2eQvCf8fZCYANnho/vwZ88x1zLxm0uHAAqzErrn/ehXSb8I91evqhdrxJv+t+MJ+LAdoxg52UMCJO9asqLG74qmRFwBtwYmLD1qdhs5gA1+mxfu7DEmhoP3Zse+KW10ZX08J4wbCO4c25065frFQq3OieIh4HN9Tigr1hbBN7TjDDNqOJ0yiJXf11Zk6nwdufeBnF1Z3f+1x3lqj0oxvGQ3cBj382LzdHIrvMgAAA=="
width="28" />
</div></td>
<td>4</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRiQBAABXRUJQVlA4IBgBAADwBwCdASocABwAPm0skEWkIqGYDAYAQAbEtIAIo/9QxwP7NnAHPuZr3mb/VeqL6M3Uq/qqW6nbIzaK/81eOzr0bbbxa+zvuAAA/v72Q3GuFGAD647Uhmi3XcgQoGdu0UqHvqH8f30LmVKupO/7WTRq0i24h/jgzohv3bnndohaOxGyqEvvOYAikAolsRjBMDfq6CaATYlYkJj5P/PYajfMb9AfbAhm9Tb4cPtzk32RJAR8zay3gK9xkPfYZLRnpq6918mnv0b5l1WuWF2hbwAWlTnpuH/DSgnL/d0Q57IMv/CedTiJ75/5zGe/m3/ZfszdKN5Gy3+Tfp3YPZfgmQrK7609nrUsVVoK+tqvi745MvFFZGSRQAAA"
width="28" />
</div></td>
<td>0</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRgwBAABXRUJQVlA4IAABAADQBgCdASocABwAPmUokEWkIqGYBgBABkS0gAiDWOn/O64Fyc6bdzM/mb0Rf9eMy0WJdalc1libkAWW2NVxNuAA/v64QCovblKmg0f+W0ZZcARl3VFwt3Me2//WBL3XQG9jFMtCbP2/7/8iAx77/63rAOXqXQb4/5fxOfX6dhbdz8RiUBPDGYm3+0zQKd/yJ6nJ/wrrs3PTXnKnmhhuYU8Uxq490SSosQ+XKNkTuELTWbEWLmHhkQyX+ztvzsu2W9YIvpnCZdQJmbCatf/VLzMynv3//DX7wD/xwBwquIjgKds5cDEzbicXGdkuM37Yt4ancr9u1dBaSMfI0UVgoAAA"
width="28" />
</div></td>
<td>5</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRsQAAABXRUJQVlA4ILgAAADwBACdASocABwAPmEojkWkIqEb/VQAQAYEtIACIJfpf53anfwh5bFxZyxmg4dIzIAA/v8aTg5Pf4AaLvDOb2+nBLe7h4WLP4eah5+VtiBuH5fnAK/9o/+/4nl+i/XuYMSDuGzWvPP7PeYAYqDelo/gGeaJWXI9qBrwbupRut1RmHAmjHeJdu952t5DneGb8d1NHD67m1X/4Fr/ktLUCjUDM3A9y/Tmv/u48GyVebp9QUFiS+qkAAAA"
width="28" />
</div></td>
<td>1</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRhIBAABXRUJQVlA4IAYBAAAQBwCdASocABwAPmkqkEWkIqGYBgBABoS0gAiDrbQKlm9OvPM8p+ijvgH6ADs18j7y7UsovRG992j1lWJXI+NjsAD+/p9i31NdsRkVHtTBTbgEfcsiV5cS5IfF+yS7MDdvlaSHRre6nuYBWIGIMPNc7//PKE5FDkecaPH1C5KuSA/FmB0Mw15jQ4M0b5oct9Sv71vHA8P6IA5GrLvUA+xjJCnISNNaYSiHVONthArmojGAh1x2X9w6ER0Oe1Yqh//8NUVB//4iTpFaItcumEp4Ryr+jO63PtCFdy7qk9dlTU9Mno2GIXYCVLSAkv7l2L/rqd15c4R/MS1/O/u2yTOuN7uvmCQA"
width="28" />
</div></td>
<td>8</td>
</tr>
</tbody>
</table>
`,`
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr style="text-align: right;">
<th data-quarto-table-cell-role="th">image</th>
<th data-quarto-table-cell-role="th">label</th>
<th data-quarto-table-cell-role="th">col_2</th>
<th data-quarto-table-cell-role="th">col_3</th>
</tr>
</thead>
<tbody>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRjQBAABXRUJQVlA4ICgBAADQBwCdASocABwAPm0wk0ckIyGhKAqogA2JaQATgDkgzcc0Q/qv5Mz5jyK/LHsAfqH/nE8VZwAZu/HNrmpfPK9PqD2yiBgAAAD+/5KsWrCrq9/+//uA5BBHAanH6EKeyCUbw/JEgElql69/9PFyh5Of0/yJ/g1hJ4xNv2eQvCf8fZCYANnho/vwZ88x1zLxm0uHAAqzErrn/ehXSb8I91evqhdrxJv+t+MJ+LAdoxg52UMCJO9asqLG74qmRFwBtwYmLD1qdhs5gA1+mxfu7DEmhoP3Zse+KW10ZX08J4wbCO4c25065frFQq3OieIh4HN9Tigr1hbBN7TjDDNqOJ0yiJXf11Zk6nwdufeBnF1Z3f+1x3lqj0oxvGQ3cBj382LzdHIrvMgAAA=="
width="28" />
</div></td>
<td>5</td>
<td>False</td>
<td>False</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRiQBAABXRUJQVlA4IBgBAADwBwCdASocABwAPm0skEWkIqGYDAYAQAbEtIAIo/9QxwP7NnAHPuZr3mb/VeqL6M3Uq/qqW6nbIzaK/81eOzr0bbbxa+zvuAAA/v72Q3GuFGAD647Uhmi3XcgQoGdu0UqHvqH8f30LmVKupO/7WTRq0i24h/jgzohv3bnndohaOxGyqEvvOYAikAolsRjBMDfq6CaATYlYkJj5P/PYajfMb9AfbAhm9Tb4cPtzk32RJAR8zay3gK9xkPfYZLRnpq6918mnv0b5l1WuWF2hbwAWlTnpuH/DSgnL/d0Q57IMv/CedTiJ75/5zGe/m3/ZfszdKN5Gy3+Tfp3YPZfgmQrK7609nrUsVVoK+tqvi745MvFFZGSRQAAA"
width="28" />
</div></td>
<td>0</td>
<td>False</td>
<td>True</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRgwBAABXRUJQVlA4IAABAADQBgCdASocABwAPmUokEWkIqGYBgBABkS0gAiDWOn/O64Fyc6bdzM/mb0Rf9eMy0WJdalc1libkAWW2NVxNuAA/v64QCovblKmg0f+W0ZZcARl3VFwt3Me2//WBL3XQG9jFMtCbP2/7/8iAx77/63rAOXqXQb4/5fxOfX6dhbdz8RiUBPDGYm3+0zQKd/yJ6nJ/wrrs3PTXnKnmhhuYU8Uxq490SSosQ+XKNkTuELTWbEWLmHhkQyX+ztvzsu2W9YIvpnCZdQJmbCatf/VLzMynv3//DX7wD/xwBwquIjgKds5cDEzbicXGdkuM37Yt4ancr9u1dBaSMfI0UVgoAAA"
width="28" />
</div></td>
<td>4</td>
<td>True</td>
<td>True</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRsQAAABXRUJQVlA4ILgAAADwBACdASocABwAPmEojkWkIqEb/VQAQAYEtIACIJfpf53anfwh5bFxZyxmg4dIzIAA/v8aTg5Pf4AaLvDOb2+nBLe7h4WLP4eah5+VtiBuH5fnAK/9o/+/4nl+i/XuYMSDuGzWvPP7PeYAYqDelo/gGeaJWXI9qBrwbupRut1RmHAmjHeJdu952t5DneGb8d1NHD67m1X/4Fr/ktLUCjUDM3A9y/Tmv/u48GyVebp9QUFiS+qkAAAA"
width="28" />
</div></td>
<td>1</td>
<td>False</td>
<td>True</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRhIBAABXRUJQVlA4IAYBAAAQBwCdASocABwAPmkqkEWkIqGYBgBABoS0gAiDrbQKlm9OvPM8p+ijvgH6ADs18j7y7UsovRG992j1lWJXI+NjsAD+/p9i31NdsRkVHtTBTbgEfcsiV5cS5IfF+yS7MDdvlaSHRre6nuYBWIGIMPNc7//PKE5FDkecaPH1C5KuSA/FmB0Mw15jQ4M0b5oct9Sv71vHA8P6IA5GrLvUA+xjJCnISNNaYSiHVONthArmojGAh1x2X9w6ER0Oe1Yqh//8NUVB//4iTpFaItcumEp4Ryr+jO63PtCFdy7qk9dlTU9Mno2GIXYCVLSAkv7l2L/rqd15c4R/MS1/O/u2yTOuN7uvmCQA"
width="28" />
</div></td>
<td>9</td>
<td>False</td>
<td>False</td>
</tr>
</tbody>
</table>
`,`
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr style="text-align: right;">
<th data-quarto-table-cell-role="th">image</th>
</tr>
</thead>
<tbody>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRgwBAABXRUJQVlA4IAABAADQBgCdASocABwAPmUokEWkIqGYBgBABkS0gAiDWOn/O64Fyc6bdzM/mb0Rf9eMy0WJdalc1libkAWW2NVxNuAA/v64QCovblKmg0f+W0ZZcARl3VFwt3Me2//WBL3XQG9jFMtCbP2/7/8iAx77/63rAOXqXQb4/5fxOfX6dhbdz8RiUBPDGYm3+0zQKd/yJ6nJ/wrrs3PTXnKnmhhuYU8Uxq490SSosQ+XKNkTuELTWbEWLmHhkQyX+ztvzsu2W9YIvpnCZdQJmbCatf/VLzMynv3//DX7wD/xwBwquIjgKds5cDEzbicXGdkuM37Yt4ancr9u1dBaSMfI0UVgoAAA"
width="28" />
</div></td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRgwBAABXRUJQVlA4IAABAADwBgCdASocABwAPm0qkkWkIiGYDAYAQAbEtIAIhnis8xnNLt1SedPRE/3CElWOkCohbusdE8Exkg1v+28U/j4AAP7/Ob1SSt9enIn22ereRH92vtIdw//DLI8H/4XGHKJtj+OXU6oraX84vvoX+Rouf6KLrkvONBeeOgoRpAqe8AFM/6GZGh/O/+RWubrAbil9NEEbdjXL/EzSXaciIndxXrGjiBH85QBiHoGcS0B2Z5oOHWTO/0PbyNdy1SD8pbdz/lg/7i6l0tPbSEKBTAG5aM8gfQ4ArPZ/2/67Na0kWD9Fod/0H8+y/ezeMWktl+RDvw2aK3OhSyy4eR0AAAAA"
width="28" />
</div></td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRiQBAABXRUJQVlA4IBgBAACwBgCdASocABwAPm0wkkakIyGhKA1QgA2JaQARC9Dt32AfGtnSecv+EGd/9FgXQHVH5VOz96seKP4mQc9AAAD+/m8gEE76f1ZGasHbwFt/zP0v7A1TApQXtGDdav5DLxSwuyy9ufIKOkpsrkh9dRFThdn41ru3bQfjDsdKV25NQemH6vz2X2sak6iQquvf+NW/8/Giv/ePpP/hzPui2oFaMgLIv0agk/vvaoQSuLQty8gwdLyXbf7W4eKyu3m9pTxhSY+U8XPiUdU0eh/k/6b8CHpfaK6vnV3o3dGkBCsM+UAf6Q3/7JKf/0eeH99r+3ZzwKqgx/krdmQZ/1j3B+1bnkWaKqf1cn9Bdv+ezjDTVwpkr/wAAAAA"
width="28" />
</div></td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRuAAAABXRUJQVlA4INQAAADwBQCdASocABwAPm00lkgkIyIhKAgAgA2JaQAJxBNIH4q653k9ZnKDIdKewmnw+s7opTeH66EvAAD+/3wq1F/CRP57+0DjeH1TiBbV9vkhK3KM/5D54RvJQFZK+cbD2zKzyacxKwbS7V8ur9TwNQ9YFIxIup5YC23B/2zGAVPgfYHNkRD/qYx6whZ660BOkr18TKFHgea3+mv2krfPJ1FsLjrfwki/8Se2YKopW9mtpoMaVrtpPifykr6ueTzxu/63j+RuT//Eg/ZerXvxoH1oFCAAAA=="
width="28" />
</div></td>
</tr>
</tbody>
</table>
`,`
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr style="text-align: right;">
<th data-quarto-table-cell-role="th">image</th>
<th data-quarto-table-cell-role="th">label</th>
<th data-quarto-table-cell-role="th">rot_label</th>
</tr>
</thead>
<tbody>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRjQBAABXRUJQVlA4ICgBAADQBwCdASocABwAPm0wk0ckIyGhKAqogA2JaQATgDkgzcc0Q/qv5Mz5jyK/LHsAfqH/nE8VZwAZu/HNrmpfPK9PqD2yiBgAAAD+/5KsWrCrq9/+//uA5BBHAanH6EKeyCUbw/JEgElql69/9PFyh5Of0/yJ/g1hJ4xNv2eQvCf8fZCYANnho/vwZ88x1zLxm0uHAAqzErrn/ehXSb8I91evqhdrxJv+t+MJ+LAdoxg52UMCJO9asqLG74qmRFwBtwYmLD1qdhs5gA1+mxfu7DEmhoP3Zse+KW10ZX08J4wbCO4c25065frFQq3OieIh4HN9Tigr1hbBN7TjDDNqOJ0yiJXf11Zk6nwdufeBnF1Z3f+1x3lqj0oxvGQ3cBj382LzdHIrvMgAAA=="
width="28" />
</div></td>
<td>5</td>
<td>4</td>
</tr>
</tbody>
</table>
`,`
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr style="text-align: right;">
<th data-quarto-table-cell-role="th">image</th>
<th data-quarto-table-cell-role="th">clip</th>
</tr>
</thead>
<tbody>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRjQBAABXRUJQVlA4ICgBAADQBwCdASocABwAPm0wk0ckIyGhKAqogA2JaQATgDkgzcc0Q/qv5Mz5jyK/LHsAfqH/nE8VZwAZu/HNrmpfPK9PqD2yiBgAAAD+/5KsWrCrq9/+//uA5BBHAanH6EKeyCUbw/JEgElql69/9PFyh5Of0/yJ/g1hJ4xNv2eQvCf8fZCYANnho/vwZ88x1zLxm0uHAAqzErrn/ehXSb8I91evqhdrxJv+t+MJ+LAdoxg52UMCJO9asqLG74qmRFwBtwYmLD1qdhs5gA1+mxfu7DEmhoP3Zse+KW10ZX08J4wbCO4c25065frFQq3OieIh4HN9Tigr1hbBN7TjDDNqOJ0yiJXf11Zk6nwdufeBnF1Z3f+1x3lqj0oxvGQ3cBj382LzdHIrvMgAAA=="
width="28" />
</div></td>
<td>[-0.052 -0.259 -0.481 -0.628 0.053 -0.032 ... 0.079 0.087 -0.346
0.904 0.037 -0.161]</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRiQBAABXRUJQVlA4IBgBAADwBwCdASocABwAPm0skEWkIqGYDAYAQAbEtIAIo/9QxwP7NnAHPuZr3mb/VeqL6M3Uq/qqW6nbIzaK/81eOzr0bbbxa+zvuAAA/v72Q3GuFGAD647Uhmi3XcgQoGdu0UqHvqH8f30LmVKupO/7WTRq0i24h/jgzohv3bnndohaOxGyqEvvOYAikAolsRjBMDfq6CaATYlYkJj5P/PYajfMb9AfbAhm9Tb4cPtzk32RJAR8zay3gK9xkPfYZLRnpq6918mnv0b5l1WuWF2hbwAWlTnpuH/DSgnL/d0Q57IMv/CedTiJ75/5zGe/m3/ZfszdKN5Gy3+Tfp3YPZfgmQrK7609nrUsVVoK+tqvi745MvFFZGSRQAAA"
width="28" />
</div></td>
<td>[ 0.063 -0.174 -0.263 -0.596 0.218 -0.332 ... 0.295 0.028 0.001
0.823 -0.149 -0.163]</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRgwBAABXRUJQVlA4IAABAADQBgCdASocABwAPmUokEWkIqGYBgBABkS0gAiDWOn/O64Fyc6bdzM/mb0Rf9eMy0WJdalc1libkAWW2NVxNuAA/v64QCovblKmg0f+W0ZZcARl3VFwt3Me2//WBL3XQG9jFMtCbP2/7/8iAx77/63rAOXqXQb4/5fxOfX6dhbdz8RiUBPDGYm3+0zQKd/yJ6nJ/wrrs3PTXnKnmhhuYU8Uxq490SSosQ+XKNkTuELTWbEWLmHhkQyX+ztvzsu2W9YIvpnCZdQJmbCatf/VLzMynv3//DX7wD/xwBwquIjgKds5cDEzbicXGdkuM37Yt4ancr9u1dBaSMfI0UVgoAAA"
width="28" />
</div></td>
<td>[-0.059 -0.222 -0.251 -0.503 -0.112 -0.233 ... 0.038 0.107 -0.329
0.765 -0.363 0.206]</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRsQAAABXRUJQVlA4ILgAAADwBACdASocABwAPmEojkWkIqEb/VQAQAYEtIACIJfpf53anfwh5bFxZyxmg4dIzIAA/v8aTg5Pf4AaLvDOb2+nBLe7h4WLP4eah5+VtiBuH5fnAK/9o/+/4nl+i/XuYMSDuGzWvPP7PeYAYqDelo/gGeaJWXI9qBrwbupRut1RmHAmjHeJdu952t5DneGb8d1NHD67m1X/4Fr/ktLUCjUDM3A9y/Tmv/u48GyVebp9QUFiS+qkAAAA"
width="28" />
</div></td>
<td>[ 0.098 -0.196 -0.42 -0.589 0.111 -0.107 ... 0.266 0.179 -0.143
1.023 -0.136 0.092]</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRhIBAABXRUJQVlA4IAYBAAAQBwCdASocABwAPmkqkEWkIqGYBgBABoS0gAiDrbQKlm9OvPM8p+ijvgH6ADs18j7y7UsovRG992j1lWJXI+NjsAD+/p9i31NdsRkVHtTBTbgEfcsiV5cS5IfF+yS7MDdvlaSHRre6nuYBWIGIMPNc7//PKE5FDkecaPH1C5KuSA/FmB0Mw15jQ4M0b5oct9Sv71vHA8P6IA5GrLvUA+xjJCnISNNaYSiHVONthArmojGAh1x2X9w6ER0Oe1Yqh//8NUVB//4iTpFaItcumEp4Ryr+jO63PtCFdy7qk9dlTU9Mno2GIXYCVLSAkv7l2L/rqd15c4R/MS1/O/u2yTOuN7uvmCQA"
width="28" />
</div></td>
<td>[-0.046 -0.147 -0.455 -0.576 0.228 -0.115 ... 0.521 0.086 -0.24
0.786 0.098 0.171]</td>
</tr>
</tbody>
</table>
`,`
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr style="text-align: right;">
<th data-quarto-table-cell-role="th">col_0</th>
<th data-quarto-table-cell-role="th">col_1</th>
<th data-quarto-table-cell-role="th">col_2</th>
</tr>
</thead>
<tbody>
<tr>
<td>-0.052</td>
<td>[-0.032 0.07 1.117 -0.037 -0.158]</td>
<td>[ 0.904 0.037 -0.161]</td>
</tr>
<tr>
<td>0.063</td>
<td>[-0.332 -0.201 1.023 -0.003 -0.094]</td>
<td>[ 0.823 -0.149 -0.163]</td>
</tr>
<tr>
<td>-0.059</td>
<td>[-0.233 0.238 0.864 -0.135 -0.017]</td>
<td>[ 0.765 -0.363 0.206]</td>
</tr>
<tr>
<td>0.098</td>
<td>[-0.107 0.038 1.081 -0.111 0.172]</td>
<td>[ 1.023 -0.136 0.092]</td>
</tr>
<tr>
<td>-0.046</td>
<td>[-0.115 0.066 1.089 -0.017 0.105]</td>
<td>[0.786 0.098 0.171]</td>
</tr>
</tbody>
</table>
`,`
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr style="text-align: right;">
<th data-quarto-table-cell-role="th">image</th>
<th data-quarto-table-cell-role="th">image_localpath</th>
</tr>
</thead>
<tbody>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRjQBAABXRUJQVlA4ICgBAADQBwCdASocABwAPm0wk0ckIyGhKAqogA2JaQATgDkgzcc0Q/qv5Mz5jyK/LHsAfqH/nE8VZwAZu/HNrmpfPK9PqD2yiBgAAAD+/5KsWrCrq9/+//uA5BBHAanH6EKeyCUbw/JEgElql69/9PFyh5Of0/yJ/g1hJ4xNv2eQvCf8fZCYANnho/vwZ88x1zLxm0uHAAqzErrn/ehXSb8I91evqhdrxJv+t+MJ+LAdoxg52UMCJO9asqLG74qmRFwBtwYmLD1qdhs5gA1+mxfu7DEmhoP3Zse+KW10ZX08J4wbCO4c25065frFQq3OieIh4HN9Tigr1hbBN7TjDDNqOJ0yiJXf11Zk6nwdufeBnF1Z3f+1x3lqj0oxvGQ3cBj382LzdHIrvMgAAA=="
width="28" />
</div></td>
<td>/Users/asiegel/.pixeltable/media/26d0c4b761ea4e0780e752dd225d0c0e/46/460a/26d0c4b761ea4e0780e752dd225d0c0e_0_1_460adecd0552496abf4209871d423953</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRiQBAABXRUJQVlA4IBgBAADwBwCdASocABwAPm0skEWkIqGYDAYAQAbEtIAIo/9QxwP7NnAHPuZr3mb/VeqL6M3Uq/qqW6nbIzaK/81eOzr0bbbxa+zvuAAA/v72Q3GuFGAD647Uhmi3XcgQoGdu0UqHvqH8f30LmVKupO/7WTRq0i24h/jgzohv3bnndohaOxGyqEvvOYAikAolsRjBMDfq6CaATYlYkJj5P/PYajfMb9AfbAhm9Tb4cPtzk32RJAR8zay3gK9xkPfYZLRnpq6918mnv0b5l1WuWF2hbwAWlTnpuH/DSgnL/d0Q57IMv/CedTiJ75/5zGe/m3/ZfszdKN5Gy3+Tfp3YPZfgmQrK7609nrUsVVoK+tqvi745MvFFZGSRQAAA"
width="28" />
</div></td>
<td>/Users/asiegel/.pixeltable/media/26d0c4b761ea4e0780e752dd225d0c0e/f0/f0a7/26d0c4b761ea4e0780e752dd225d0c0e_0_1_f0a7eb312a32475cb66a54fc4f213ebe</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRgwBAABXRUJQVlA4IAABAADQBgCdASocABwAPmUokEWkIqGYBgBABkS0gAiDWOn/O64Fyc6bdzM/mb0Rf9eMy0WJdalc1libkAWW2NVxNuAA/v64QCovblKmg0f+W0ZZcARl3VFwt3Me2//WBL3XQG9jFMtCbP2/7/8iAx77/63rAOXqXQb4/5fxOfX6dhbdz8RiUBPDGYm3+0zQKd/yJ6nJ/wrrs3PTXnKnmhhuYU8Uxq490SSosQ+XKNkTuELTWbEWLmHhkQyX+ztvzsu2W9YIvpnCZdQJmbCatf/VLzMynv3//DX7wD/xwBwquIjgKds5cDEzbicXGdkuM37Yt4ancr9u1dBaSMfI0UVgoAAA"
width="28" />
</div></td>
<td>/Users/asiegel/.pixeltable/media/26d0c4b761ea4e0780e752dd225d0c0e/66/66d1/26d0c4b761ea4e0780e752dd225d0c0e_0_1_66d1f6bbcec543bc9d558f9e4025d26a</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRsQAAABXRUJQVlA4ILgAAADwBACdASocABwAPmEojkWkIqEb/VQAQAYEtIACIJfpf53anfwh5bFxZyxmg4dIzIAA/v8aTg5Pf4AaLvDOb2+nBLe7h4WLP4eah5+VtiBuH5fnAK/9o/+/4nl+i/XuYMSDuGzWvPP7PeYAYqDelo/gGeaJWXI9qBrwbupRut1RmHAmjHeJdu952t5DneGb8d1NHD67m1X/4Fr/ktLUCjUDM3A9y/Tmv/u48GyVebp9QUFiS+qkAAAA"
width="28" />
</div></td>
<td>/Users/asiegel/.pixeltable/media/26d0c4b761ea4e0780e752dd225d0c0e/41/4163/26d0c4b761ea4e0780e752dd225d0c0e_0_1_416302ffe83941938c47299b18f692c5</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRhIBAABXRUJQVlA4IAYBAAAQBwCdASocABwAPmkqkEWkIqGYBgBABoS0gAiDrbQKlm9OvPM8p+ijvgH6ADs18j7y7UsovRG992j1lWJXI+NjsAD+/p9i31NdsRkVHtTBTbgEfcsiV5cS5IfF+yS7MDdvlaSHRre6nuYBWIGIMPNc7//PKE5FDkecaPH1C5KuSA/FmB0Mw15jQ4M0b5oct9Sv71vHA8P6IA5GrLvUA+xjJCnISNNaYSiHVONthArmojGAh1x2X9w6ER0Oe1Yqh//8NUVB//4iTpFaItcumEp4Ryr+jO63PtCFdy7qk9dlTU9Mno2GIXYCVLSAkv7l2L/rqd15c4R/MS1/O/u2yTOuN7uvmCQA"
width="28" />
</div></td>
<td>/Users/asiegel/.pixeltable/media/26d0c4b761ea4e0780e752dd225d0c0e/7c/7c83/26d0c4b761ea4e0780e752dd225d0c0e_0_1_7c83911cefa840378399ff4ad26d59e1</td>
</tr>
</tbody>
</table>
`,`
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr style="text-align: right;">
<th data-quarto-table-cell-role="th">image</th>
<th data-quarto-table-cell-role="th">channel</th>
<th data-quarto-table-cell-role="th">channel_errortype</th>
<th data-quarto-table-cell-role="th">channel_errormsg</th>
</tr>
</thead>
<tbody>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRjQBAABXRUJQVlA4ICgBAADQBwCdASocABwAPm0wk0ckIyGhKAqogA2JaQATgDkgzcc0Q/qv5Mz5jyK/LHsAfqH/nE8VZwAZu/HNrmpfPK9PqD2yiBgAAAD+/5KsWrCrq9/+//uA5BBHAanH6EKeyCUbw/JEgElql69/9PFyh5Of0/yJ/g1hJ4xNv2eQvCf8fZCYANnho/vwZ88x1zLxm0uHAAqzErrn/ehXSb8I91evqhdrxJv+t+MJ+LAdoxg52UMCJO9asqLG74qmRFwBtwYmLD1qdhs5gA1+mxfu7DEmhoP3Zse+KW10ZX08J4wbCO4c25065frFQq3OieIh4HN9Tigr1hbBN7TjDDNqOJ0yiJXf11Zk6nwdufeBnF1Z3f+1x3lqj0oxvGQ3cBj382LzdHIrvMgAAA=="
width="28" />
</div></td>
<td>None</td>
<td>ValueError</td>
<td>band index out of range</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRiQBAABXRUJQVlA4IBgBAADwBwCdASocABwAPm0skEWkIqGYDAYAQAbEtIAIo/9QxwP7NnAHPuZr3mb/VeqL6M3Uq/qqW6nbIzaK/81eOzr0bbbxa+zvuAAA/v72Q3GuFGAD647Uhmi3XcgQoGdu0UqHvqH8f30LmVKupO/7WTRq0i24h/jgzohv3bnndohaOxGyqEvvOYAikAolsRjBMDfq6CaATYlYkJj5P/PYajfMb9AfbAhm9Tb4cPtzk32RJAR8zay3gK9xkPfYZLRnpq6918mnv0b5l1WuWF2hbwAWlTnpuH/DSgnL/d0Q57IMv/CedTiJ75/5zGe/m3/ZfszdKN5Gy3+Tfp3YPZfgmQrK7609nrUsVVoK+tqvi745MvFFZGSRQAAA"
width="28" />
</div></td>
<td>None</td>
<td>ValueError</td>
<td>band index out of range</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRgwBAABXRUJQVlA4IAABAADQBgCdASocABwAPmUokEWkIqGYBgBABkS0gAiDWOn/O64Fyc6bdzM/mb0Rf9eMy0WJdalc1libkAWW2NVxNuAA/v64QCovblKmg0f+W0ZZcARl3VFwt3Me2//WBL3XQG9jFMtCbP2/7/8iAx77/63rAOXqXQb4/5fxOfX6dhbdz8RiUBPDGYm3+0zQKd/yJ6nJ/wrrs3PTXnKnmhhuYU8Uxq490SSosQ+XKNkTuELTWbEWLmHhkQyX+ztvzsu2W9YIvpnCZdQJmbCatf/VLzMynv3//DX7wD/xwBwquIjgKds5cDEzbicXGdkuM37Yt4ancr9u1dBaSMfI0UVgoAAA"
width="28" />
</div></td>
<td>None</td>
<td>ValueError</td>
<td>band index out of range</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRsQAAABXRUJQVlA4ILgAAADwBACdASocABwAPmEojkWkIqEb/VQAQAYEtIACIJfpf53anfwh5bFxZyxmg4dIzIAA/v8aTg5Pf4AaLvDOb2+nBLe7h4WLP4eah5+VtiBuH5fnAK/9o/+/4nl+i/XuYMSDuGzWvPP7PeYAYqDelo/gGeaJWXI9qBrwbupRut1RmHAmjHeJdu952t5DneGb8d1NHD67m1X/4Fr/ktLUCjUDM3A9y/Tmv/u48GyVebp9QUFiS+qkAAAA"
width="28" />
</div></td>
<td>None</td>
<td>ValueError</td>
<td>band index out of range</td>
</tr>
<tr>
<td><div class="pxt_image" style="width:28px;">
<img
src="data:image/webp;base64,UklGRhIBAABXRUJQVlA4IAYBAAAQBwCdASocABwAPmkqkEWkIqGYBgBABoS0gAiDrbQKlm9OvPM8p+ijvgH6ADs18j7y7UsovRG992j1lWJXI+NjsAD+/p9i31NdsRkVHtTBTbgEfcsiV5cS5IfF+yS7MDdvlaSHRre6nuYBWIGIMPNc7//PKE5FDkecaPH1C5KuSA/FmB0Mw15jQ4M0b5oct9Sv71vHA8P6IA5GrLvUA+xjJCnISNNaYSiHVONthArmojGAh1x2X9w6ER0Oe1Yqh//8NUVB//4iTpFaItcumEp4Ryr+jO63PtCFdy7qk9dlTU9Mno2GIXYCVLSAkv7l2L/rqd15c4R/MS1/O/u2yTOuN7uvmCQA"
width="28" />
</div></td>
<td>None</td>
<td>ValueError</td>
<td>band index out of range</td>
</tr>
</tbody>
</table>
`,`
<table>
<thead>
<tr>
<th>Pixeltable type</th>
<th>Python type</th>
</tr>
</thead>
<tbody>
<tr>
<td>pxt.String</td>
<td>str</td>
</tr>
<tr>
<td>pxt.Int</td>
<td>int</td>
</tr>
<tr>
<td>pxt.Float</td>
<td>float</td>
</tr>
<tr>
<td>pxt.Bool</td>
<td>bool</td>
</tr>
<tr>
<td>pxt.Timestamp</td>
<td>datetime.datetime</td>
</tr>
<tr>
<td>pxt.Json</td>
<td>**</td>
</tr>
<tr>
<td>pxt.Array</td>
<td>np.ndarray</td>
</tr>
<tr>
<td>pxt.Image</td>
<td>PIL.Image.Image</td>
</tr>
<tr>
<td>pxt.Video</td>
<td>str</td>
</tr>
<tr>
<td>pxt.Audio</td>
<td>str</td>
</tr>
<tr>
<td>pxt.Document</td>
<td>str</td>
</tr>
</tbody>
</table>
`,`<style type="text/css">
#T_bfc73_row0_col0 {
  white-space: pre-wrap;
  text-align: left;
  font-weight: bold;
}
</style>
`,`
<table id="T_bfc73" data-quarto-postprocess="true">
<tbody>
<tr>
<td id="T_bfc73_row0_col0" class="data row0 col0">Table
'demo.mnist'</td>
</tr>
</tbody>
</table>
`,`
<style type="text/css">
#T_092b2 th {
  text-align: left;
}
#T_092b2_row0_col0, #T_092b2_row0_col1, #T_092b2_row0_col2, #T_092b2_row1_col0, #T_092b2_row1_col1, #T_092b2_row1_col2, #T_092b2_row2_col0, #T_092b2_row2_col1, #T_092b2_row2_col2, #T_092b2_row3_col0, #T_092b2_row3_col1, #T_092b2_row3_col2, #T_092b2_row4_col0, #T_092b2_row4_col1, #T_092b2_row4_col2, #T_092b2_row5_col0, #T_092b2_row5_col1, #T_092b2_row5_col2 {
  white-space: pre-wrap;
  text-align: left;
}
</style>
`,`
<table id="T_092b2" data-quarto-postprocess="true">
<thead>
<tr>
<th id="T_092b2_level0_col0" class="col_heading level0 col0"
data-quarto-table-cell-role="th">Column Name</th>
<th id="T_092b2_level0_col1" class="col_heading level0 col1"
data-quarto-table-cell-role="th">Type</th>
<th id="T_092b2_level0_col2" class="col_heading level0 col2"
data-quarto-table-cell-role="th">Computed With</th>
</tr>
</thead>
<tbody>
<tr>
<td id="T_092b2_row0_col0" class="data row0 col0">image</td>
<td id="T_092b2_row0_col1" class="data row0 col1">Image</td>
<td id="T_092b2_row0_col2" class="data row0 col2"></td>
</tr>
<tr>
<td id="T_092b2_row1_col0" class="data row1 col0">label</td>
<td id="T_092b2_row1_col1" class="data row1 col1">String</td>
<td id="T_092b2_row1_col2" class="data row1 col2"></td>
</tr>
<tr>
<td id="T_092b2_row2_col0" class="data row2 col0">classification</td>
<td id="T_092b2_row2_col1" class="data row2 col1">Json</td>
<td id="T_092b2_row2_col2"
class="data row2 col2">vit_for_image_classification(image,
model_id='farleyknight-org-username/vit-base-mnist')</td>
</tr>
<tr>
<td id="T_092b2_row3_col0" class="data row3 col0">pred_label</td>
<td id="T_092b2_row3_col1" class="data row3 col1">Json</td>
<td id="T_092b2_row3_col2"
class="data row3 col2">classification.label_text[0]</td>
</tr>
<tr>
<td id="T_092b2_row4_col0" class="data row4 col0">clip</td>
<td id="T_092b2_row4_col1" class="data row4 col1">Array[(512,),
Float]</td>
<td id="T_092b2_row4_col2" class="data row4 col2">clip(image,
model_id='openai/clip-vit-base-patch32')</td>
</tr>
<tr>
<td id="T_092b2_row5_col0" class="data row5 col0">channel</td>
<td id="T_092b2_row5_col1" class="data row5 col1">Image['L']</td>
<td id="T_092b2_row5_col2"
class="data row5 col2">image.getchannel(1)</td>
</tr>
</tbody>
</table>
`];


Welcome to Section 3 of the **Pixeltable Fundamentals** tutorial,
**Queries and Expressions**.

In the previous section of this tutorial, [Computed
Columns](https://docs.pixeltable.com/docs/computed-columns), we saw how
to issue queries over Pixeltable tables, such as:


```python
pop_t.select(yoy_change=(pop_t.pop_2023 - pop_t.pop_2022)).collect()
```

We also saw how to define **computed columns** that become part of the
table and are updated automatically when new rows are inserted:


```python
pop_t.add_column(yoy_change=(pop_t.pop_2023 - pop_t.pop_2022))
```

Both these examples use the **Pixeltable expression**
`pop_t.pop_2023 - pop_t.pop_2022`. We’ve seen a number of other
expressions as well, such as the chain of image operations


```python
t.source.convert('RGBA').rotate(10)
```

and the model invocation


```python
detr_for_object_detection(
    t.source,
    model_id='facebook/detr-resnet-50',
    threshold=0.8
)
```

Expressions are the basic building blocks of Pixeltable workloads. An
expression can be included in a `select()` statement, which will cause
it to be evaluated dynamically, or in an `add_column()` statement, which
will add it to the table schema as a computed column. In this section,
we’ll dive deeper into the different kinds of Pixeltable expressions and
their uses. We’ll:

-   Understand the relationship between Pixeltable expressions and query
    execution
-   Survey the different types of expressions
-   Learn more about the Pixeltable type system

To get started, let’s import the necessary libraries for this tutorial
and set up a demo directory.


```python
%pip install -qU pixeltable datasets torch transformers
```


```python
import pixeltable as pxt

pxt.drop_dir('demo', force=True)
pxt.create_dir('demo')
```

``` text
Connected to Pixeltable database at: postgresql+psycopg://postgres:@/pixeltable?host=/Users/asiegel/.pixeltable/pgdata
Created directory 'demo'.
```

``` text
<pixeltable.catalog.dir.Dir at 0x30d6b36d0>
```

In this tutorial we’re going to work with a subset of the MNIST dataset,
a classic reference database of hand-drawn digits. A copy of the MNIST
dataset is hosted on the Hugging Face datasets repository, so wecan use
Pixeltable’s built-in Hugging Face data importer to load it into a
Pixeltable table.


```python
import datasets

# Download the first 50 images of the MNIST dataset
ds = datasets.load_dataset('ylecun/mnist', split='train[:50]')

# Import them into a Pixeltable table
t = pxt.io.import_huggingface_dataset('demo.mnist', ds)
```

``` text
Created table `mnist_tmp_32592145`.
Inserting rows into `mnist_tmp_32592145`: 50 rows [00:00, 1071.83 rows/s]
Inserted 50 rows with 0 errors.
```


```python
t.head(5)
```

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[0] }} />

### Column References

The most basic type of expression is a **column reference**: that’s what
you get when you type, say, `t.image`. An expression such as `t.image`
by itself is just a Python object; it doesn’t contain any actual data,
and no data will be loaded until you use the expression in a `select()`
query or `add_column()` statement. Here’s what we get if we type
`t.image` by itself:


```python
t.image
```

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[1] }} />

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[2] }} />

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[3] }} />

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[4] }} />

This is true of all Pixeltable expressions: we can freely create them
and manipulate them in various ways, but no actual data will be loaded
until we use them in a query.

### JSON Collections (Dicts and Lists)

Data is commonly presented in JSON format: for example, API responses
and model output often take the shape of JSON dictionaries or lists of
dictionaries. Pixeltable has native support for JSON accessors. To
demonstrate this, let’s add a computed column that runs an image
classification model against the images in our dataset.


```python
from pixeltable.functions.huggingface import vit_for_image_classification

t.add_computed_column(classification=vit_for_image_classification(
    t.image,
    model_id='farleyknight-org-username/vit-base-mnist'
))
```

``` text
Added 50 column values with 0 errors.
```

``` text
UpdateStatus(num_rows=50, num_computed_values=50, num_excs=0, updated_cols=[], cols_with_excs=[])
```


```python
t.select(t.image, t.classification).head(3)
```

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[5] }} />

We see that the output is returned as a dict containing three lists: the
five most likely labels (classes) for the image, the corresponding text
labels (in this case, just the string form of the class number), and the
scores (confidences) of each prediction. The Pixeltable type of the
`classification` column is `pxt.Json`:


```python
t
```

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[6] }} />

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[7] }} />

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[8] }} />

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[9] }} />

Pixeltable provides a range of operators on `Json`-typed output that
behave just as you’d expect. To look up a key in a dictionary, use the
syntax `t.classification['labels']`:


```python
t.select(t.classification['labels']).head(3)
```

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[10] }} />

You can also use a convenient “attribute” syntax for dictionary lookups.
This follows the standard
[JSONPath](https://en.wikipedia.org/wiki/JSONPath) expression syntax.


```python
t.select(t.classification.labels).head(3)
```

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[11] }} />

The “attribute” syntax isn’t fully general (it won’t work for dictionary
keys that are not valid Python identifiers), but it’s handy when it
works.

`t.classification.labels` is another Pixeltable expression; you can
think of it as saying, “do the `'labels'` lookup from every dictionary
in the column `t.classification`, and return the result as a new
column.” As before, the expression by itself contains no data; it’s the
query that does the actual work of retrieving data. Here’s what we see
if we just give the expression by itself, without a query:


```python
t.classification.labels
```

``` text
classification.labels
```

Similarly, one can pull out a specific item in a list (for this model,
we’re probably mostly interested in the first item anyway):


```python
t.select(t.classification.labels[0]).head(3)
```

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[12] }} />

Or slice a list in the usual manner:


```python
t.select(t.classification.labels[:2]).head(3)
```

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[13] }} />

Pixeltable is resilient against out-of-bounds indices or dictionary
keys. If an index or key doesn’t exist for a particular row, you’ll get
a `None` output for that row.


```python
t.select(t.classification.not_a_key).head(3)
```

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[14] }} />

As always, any expression can be used to create a computed column.


```python
# Use label_text to be consistent with t.label, which was given
# to us as a string

t.add_computed_column(pred_label=t.classification.label_text[0])
t
```

``` text
Added 50 column values with 0 errors.
```

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[15] }} />

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[16] }} />

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[17] }} />

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[18] }} />

Finally, just as it’s possible to extract items from lists and
dictionaries using Pixeltable expressions, you can also construct new
lists and dictionaries: just package them up in the usual way.


```python
custom_dict = {
    # Keys must be strings; values can be any expressions
    'ground_truth': t.label,
    'prediction': t.pred_label,
    'is_correct': t.label == t.pred_label,
    # You can also use constants as values
    'engine': 'pixeltable',
}

t.select(t.image, custom_dict).head(5)
```

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[19] }} />

### UDF Calls

UDF calls are another common type of expression. We’ve seen them
throughout the tutorial; in fact, we used one a moment ago when we added
a model invocation to our workload:


```python
vit_for_image_classification(
    t.image,
    model_id='farleyknight-org-username/vit-base-mnist'
)
```

This calls the `vit_for_image_classification` UDF in the
`pxt.functions.huggingface` module. Note that
`vit_for_image_classification` is a Pixeltable UDF, not an ordinary
Python function. (UDFs were first discussed in the [Tables and Data
Operations](https://docs.pixeltable.com/docs/computed-columns) section
of this tutorial.) You can think of a Pixeltable UDF as a function that
operates on columns of data, iteratively applying an underlying
operation to each row in the column (or columns). In this case,
`vit_for_image_classification` operates on `t.image`, running the model
against every image in the column.

Notice that in addition to the column `t.image`, this call to
`vit_for_image_classification` also takes a constant argument specifying
the `model_id`. Any UDF call argument may be a constant, and the
constant value simply means “use this value for every row being
evaluated”.

You can always compose Pixeltable expressions to form more complicated
ones; here’s an example that runs the model against a 90-degree rotation
of every image in the sample and extracts the label. Not surprisingly,
the model doesn’t perform as well on the rotated images.


```python
rot_model_result = vit_for_image_classification(
    t.image.rotate(90),
    model_id='farleyknight-org-username/vit-base-mnist'
)

t.select(t.image, rot_label=rot_model_result.labels[0]).head(5)
```

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[20] }} />

Note that we employed a useful trick here: we assigned an expression to
the variable <code>rot_model_result</code> for later reuse. Every
Pixeltable expression is a Python object, so you can freely assign them
to variables, reuse them, compose them, and so on. Remember that nothing
actually happens until the expression is used in a query - so in this
example, setting the variable <code>rot_model_result</code> doesn’t
itself result in any data being retrieved; that only happens later, when
we actually use it in the <code>select()</code> query.

There are a large number of built-in UDFs that ship with Pixeltable; you
can always refer back to the [API
Documentation](https://pixeltable.github.io/pixeltable/) for details.

### Method Calls

Many built-in UDFs allow a convenient alternate syntax. The following
two expressions are exactly equivalent:


```python
a = t.image.rotate(90)
b = pxt.functions.image.rotate(t.image, 90)
```

`a` and `b` can always be used interchangeably in queries, with
identical results. Just like in standard Python classes, whenever
Pixeltable sees the **method call** `t.image.rotate(90)`, it interprets
it as a **function call** `pxt.functions.image.rotate(self, 90)`, with
(in this case) `self` equal to `t.image`.

Any method call can also be written as a function call, but (just like
in standard Python) not every function call can be written as a method
call. For example, the following won’t work:


```python
t.image.vit_for_image_classification(
    model_id='farleyknight-org-username/vit-base-mnist'
)
```

That’s because `vit_for_image_classification` is part of the
`pxt.functions.huggingface` module, not the core module
`pxt.functions.image`. Most Pixeltable types have a corresponding **core
module** of UDFs that can be used as method calls (`pxt.functions.image`
for `Image`; `pxt.functions.string` for `String`; and so on), described
fully in the [API
Documentation](https://pixeltable.github.io/pixeltable/).

### Arithmetic and Boolean Operations

Expressions can also be combined using standard arithmetic and boolean
operators. As with everything else, arithmetic and boolean expressions
are operations on columns that (when used in a query) are applied to
every row.


```python
t.select(
    t.image,
    t.label,
    t.label == '4',
    t.label < '5',
).head(5)
```

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[21] }} />

When you use a `where` clause in a query, you’re giving it a Pixeltable
expression, too (a boolean-valued one).


```python
t.where(t.label == '4').select(t.image).show()
```

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[22] }} />

The following example shows how boolean expressions can be assigned to
variables and used to form more complex expressions.


```python
# Reuse `rot_model_result` from above, extracting
# the dominant label as a new expression

rot_label = rot_model_result.label_text[0]

# Select all the rows where the ground truth label is '5',
# and the "rotated" version of the model got it wrong
# (by returning something other than a '5')

t.where((t.label == '5') & (rot_label != '5')).select(
    t.image, t.label, rot_label=rot_label
).show()
```

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[23] }} />

Notice that to form a logical “and”, we wrote


```python
(t.label == '5') & (rot_label != '5')
```

using the operator `&` rather than `and`. Likewise, to form a logical
“or”, we’d use `|` rather than `or`:


```python
(t.label == '5') | (rot_label != '5')
```

For logical negation:


```python
~(t.label == '5')
```

This follows the convention used by other popular data-manipulation
frameworks such as Pandas, and it’s necessary because the Python
language does not allow the meanings of `and`, `or`, and `not` to be
customized. There is one more instance of this to be aware of: to check
whether an expression is `None`, it’s necessary to write (say)


```python
t.label == None
```

rather than `t.label is None`, for the same reason.

### Arrays

In addition to lists and dicts, Pixeltable also has built-in support for
numerical arrays. A typical place where arrays show up is as the output
of an embedding.


```python
from pixeltable.functions.huggingface import clip

# Add a computed column that computes a CLIP embedding for each image
t.add_computed_column(clip=clip(t.image, model_id='openai/clip-vit-base-patch32'))
t.select(t.image, t.clip).head(5)
```

``` text
Added 50 column values with 0 errors.
```

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[24] }} />

The underlying Python type of `pxt.Array` is an ordinary NumPy array
(`np.ndarray`), so that an array-typed column is a column of NumPy
arrays (in this example, representing the embedding output of each image
in the table). As with lists, arrays can be sliced in all the usual
ways.


```python
t.select(t.clip[0], t.clip[5:10], t.clip[-3:]).head(5)
```

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[25] }} />

### Ad hoc UDFs with `apply`

We’ve now seen the most commonly encountered Pixeltable expression
types. There are a few other less commonly encountered expressions that
are occasionally useful.

You can use `apply` to map any Python function onto a column of data.
You can think of `apply` as a quick way of constructing an “on-the-fly”
UDF for one-off use.


```python
import numpy as np

t.select(t.clip.apply(np.ndarray.dumps, col_type=pxt.String)).head(2)
```

Note, however, that if the function you’re `apply`ing doesn’t have type
hints (as in the example here), you’ll need to specify the output column
type explicitly.

### Type Conversion with `astype`

Sometimes it’s useful to transform an expression of one type into a
different type. For example, you can use `astype` to turn an expression
of type `pxt.Json` into one of type `pxt.String`. This assumes that the
value being converted is actually a string; otherwise, you’ll get an
exception. Here’s an example:


```python
# Select the text in position 0 of `t.classification.label_text`; since
# `t.classification.label_text` has type `pxt.Json`, so does
# `t.classification.label_text[0]`

t.classification.label_text[0].col_type
```

``` text
Optional[Json]
```


```python
# Select the text in position 0 of `t.classification.label_text`, this time
# cast as a `pxt.String`

t.classification.label_text[0].astype(pxt.String).col_type
```

``` text
Optional[String]
```

### Column Properties

Some `ColumnRef` expressions have additional useful properties. A media
column (image, video, audio, or document) has the following two
properties:

-   `localpath`: the media location on the local filesystem
-   `fileurl`: the original URL where the media resides (could be the
    same as `localpath`)


```python
t.select(t.image, t.image.localpath).head(5)
```

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[26] }} />

Any computed column will have two additional properties, `errortype` and
`errormsg`. These properties will usually be `None`. However, if the
computed column was created with `on_error='ignore'` and an exception
was encountered during column execution, then the properties will
contain additional information about the exception.

To demonstrate this feature, we’re going to deliberately trigger an
exception in a computed column. The images in our example table are
black and white, meaning they have only one color channel. If we try to
extract a channel other than channel number `0`, we’ll get an exception.
Ordinarily when we call `add_computed_column`, the exception is raised
and the `add_computed_column` operation is aborted.


```python
t.add_computed_column(channel=t.image.getchannel(1))
```

``` text
Error: Error while evaluating computed column `channel`:
band index out of range
[0;31m---------------------------------------------------------------------------[0m
[0;31mValueError[0m                                Traceback (most recent call last)
File [0;32m~/Dropbox/workspace/pixeltable/pixeltable/pixeltable/exec/expr_eval/evaluators.py:231[0m, in [0;36mFnCallEvaluator.eval[0;34m(self, call_args_batch)[0m
[1;32m    230[0m [38;5;28;01mtry[39;00m:
[0;32m--> 231[0m     item[38;5;241m.[39mrow[[38;5;28mself[39m[38;5;241m.[39mfn_call[38;5;241m.[39mslot_idx] [38;5;241m=[39m [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43mscalar_py_fn[49m[43m([49m[38;5;241;43m*[39;49m[43mitem[49m[38;5;241;43m.[39;49m[43margs[49m[43m,[49m[43m [49m[38;5;241;43m*[39;49m[38;5;241;43m*[39;49m[43mitem[49m[38;5;241;43m.[39;49m[43mkwargs[49m[43m)[49m
[1;32m    232[0m [38;5;28;01mexcept[39;00m [38;5;167;01mException[39;00m [38;5;28;01mas[39;00m exc:

File [0;32m/opt/miniconda3/envs/pxt/lib/python3.9/site-packages/PIL/Image.py:2664[0m, in [0;36mImage.getchannel[0;34m(self, channel)[0m
[1;32m   2662[0m         [38;5;28;01mraise[39;00m [38;5;167;01mValueError[39;00m(msg) [38;5;28;01mfrom[39;00m [38;5;21;01me[39;00m
[0;32m-> 2664[0m [38;5;28;01mreturn[39;00m [38;5;28mself[39m[38;5;241m.[39m_new([38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43mim[49m[38;5;241;43m.[39;49m[43mgetband[49m[43m([49m[43mchannel[49m[43m)[49m)

[0;31mValueError[0m: band index out of range

The above exception was the direct cause of the following exception:

[0;31mError[0m                                     Traceback (most recent call last)
Cell [0;32mIn[29], line 1[0m
[0;32m----> 1[0m [43mt[49m[38;5;241;43m.[39;49m[43madd_computed_column[49m[43m([49m[43mchannel[49m[38;5;241;43m=[39;49m[43mt[49m[38;5;241;43m.[39;49m[43mimage[49m[38;5;241;43m.[39;49m[43mgetchannel[49m[43m([49m[38;5;241;43m1[39;49m[43m)[49m[43m)[49m

File [0;32m~/Dropbox/workspace/pixeltable/pixeltable/pixeltable/catalog/table.py:638[0m, in [0;36mTable.add_computed_column[0;34m(self, stored, print_stats, on_error, if_exists, **kwargs)[0m
[1;32m    636[0m new_col [38;5;241m=[39m [38;5;28mself[39m[38;5;241m.[39m_create_columns({col_name: col_schema})[[38;5;241m0[39m]
[1;32m    637[0m [38;5;28mself[39m[38;5;241m.[39m_verify_column(new_col)
[0;32m--> 638[0m status [38;5;241m=[39m [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43m_tbl_version[49m[38;5;241;43m.[39;49m[43mget[49m[43m([49m[43m)[49m[38;5;241;43m.[39;49m[43madd_columns[49m[43m([49m[43m[[49m[43mnew_col[49m[43m][49m[43m,[49m[43m [49m[43mprint_stats[49m[38;5;241;43m=[39;49m[43mprint_stats[49m[43m,[49m[43m [49m[43mon_error[49m[38;5;241;43m=[39;49m[43mon_error[49m[43m)[49m
[1;32m    639[0m FileCache[38;5;241m.[39mget()[38;5;241m.[39memit_eviction_warnings()
[1;32m    640[0m [38;5;28;01mreturn[39;00m status

File [0;32m~/Dropbox/workspace/pixeltable/pixeltable/pixeltable/catalog/table_version.py:597[0m, in [0;36mTableVersion.add_columns[0;34m(self, cols, print_stats, on_error)[0m
[1;32m    595[0m preceding_schema_version [38;5;241m=[39m [38;5;28mself[39m[38;5;241m.[39mschema_version
[1;32m    596[0m [38;5;28mself[39m[38;5;241m.[39mschema_version [38;5;241m=[39m [38;5;28mself[39m[38;5;241m.[39mversion
[0;32m--> 597[0m status [38;5;241m=[39m [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43m_add_columns[49m[43m([49m[43mcols[49m[43m,[49m[43m [49m[43mprint_stats[49m[38;5;241;43m=[39;49m[43mprint_stats[49m[43m,[49m[43m [49m[43mon_error[49m[38;5;241;43m=[39;49m[43mon_error[49m[43m)[49m
[1;32m    598[0m [38;5;28;01mfor[39;00m col [38;5;129;01min[39;00m cols:
[1;32m    599[0m     _ [38;5;241m=[39m [38;5;28mself[39m[38;5;241m.[39m_add_default_index(col)

File [0;32m~/Dropbox/workspace/pixeltable/pixeltable/pixeltable/catalog/table_version.py:670[0m, in [0;36mTableVersion._add_columns[0;34m(self, cols, print_stats, on_error)[0m
[1;32m    668[0m     [38;5;66;03m# we need to re-initialize the sqlalchemy schema[39;00m
[1;32m    669[0m     [38;5;28mself[39m[38;5;241m.[39mstore_tbl[38;5;241m.[39mcreate_sa_tbl()
[0;32m--> 670[0m     [38;5;28;01mraise[39;00m exc
[1;32m    671[0m [38;5;28;01mfinally[39;00m:
[1;32m    672[0m     plan[38;5;241m.[39mclose()

File [0;32m~/Dropbox/workspace/pixeltable/pixeltable/pixeltable/catalog/table_version.py:653[0m, in [0;36mTableVersion._add_columns[0;34m(self, cols, print_stats, on_error)[0m
[1;32m    651[0m plan[38;5;241m.[39mopen()
[1;32m    652[0m [38;5;28;01mtry[39;00m:
[0;32m--> 653[0m     num_excs [38;5;241m=[39m [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43mstore_tbl[49m[38;5;241;43m.[39;49m[43mload_column[49m[43m([49m[43mcol[49m[43m,[49m[43m [49m[43mplan[49m[43m,[49m[43m [49m[43mvalue_expr_slot_idx[49m[43m,[49m[43m [49m[43mon_error[49m[43m)[49m
[1;32m    654[0m [38;5;28;01mexcept[39;00m sql[38;5;241m.[39mexc[38;5;241m.[39mDBAPIError [38;5;28;01mas[39;00m exc:
[1;32m    655[0m     [38;5;66;03m# Wrap the DBAPIError in an excs.Error to unify processing in the subsequent except block[39;00m
[1;32m    656[0m     [38;5;28;01mraise[39;00m excs[38;5;241m.[39mError([38;5;124mf[39m[38;5;124m'[39m[38;5;124mSQL error during execution of computed column `[39m[38;5;132;01m{[39;00mcol[38;5;241m.[39mname[38;5;132;01m}[39;00m[38;5;124m`:[39m[38;5;130;01m\n[39;00m[38;5;132;01m{[39;00mexc[38;5;132;01m}[39;00m[38;5;124m'[39m) [38;5;28;01mfrom[39;00m [38;5;21;01mexc[39;00m

File [0;32m~/Dropbox/workspace/pixeltable/pixeltable/pixeltable/store.py:268[0m, in [0;36mStoreBase.load_column[0;34m(self, col, exec_plan, value_expr_slot_idx, on_error)[0m
[1;32m    266[0m value_exc [38;5;241m=[39m result_row[38;5;241m.[39mget_exc(value_expr_slot_idx)
[1;32m    267[0m [38;5;28;01mif[39;00m on_error [38;5;241m==[39m [38;5;124m'[39m[38;5;124mabort[39m[38;5;124m'[39m:
[0;32m--> 268[0m     [38;5;28;01mraise[39;00m excs[38;5;241m.[39mError(
[1;32m    269[0m         [38;5;124mf[39m[38;5;124m'[39m[38;5;124mError while evaluating computed column `[39m[38;5;132;01m{[39;00mcol[38;5;241m.[39mname[38;5;132;01m}[39;00m[38;5;124m`:[39m[38;5;130;01m\n[39;00m[38;5;132;01m{[39;00mvalue_exc[38;5;132;01m}[39;00m[38;5;124m'[39m
[1;32m    270[0m     ) [38;5;28;01mfrom[39;00m [38;5;21;01mvalue_exc[39;00m
[1;32m    271[0m [38;5;66;03m# we store a NULL value and record the exception/exc type[39;00m
[1;32m    272[0m error_type [38;5;241m=[39m [38;5;28mtype[39m(value_exc)[38;5;241m.[39m[38;5;18m__name__[39m

[0;31mError[0m: Error while evaluating computed column `channel`:
band index out of range
```

But if we use `on_error='ignore'`, the exception will be logged in the
column properties instead.


```python
t.add_computed_column(channel=t.image.getchannel(1), on_error='ignore')
```

``` text
Added 50 column values with 50 errors.
```

``` text
UpdateStatus(num_rows=50, num_computed_values=50, num_excs=50, updated_cols=[], cols_with_excs=['mnist_tmp_32592145.channel'])
```

Notice that the update status informs us that there were 50 errors. If
we query the table, we see that the column contains only `None` values,
but the `errortype` and `errormsg` fields contain details of the error.


```python
t.select(t.image, t.channel, t.channel.errortype, t.channel.errormsg).head(5)
```

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[27] }} />

More details on Pixeltable’s error handling can be found in the [Working
with External
Files](https://docs.pixeltable.com/docs/working-with-external-files)
how-to guide.

## The Pixeltable Type System

We’ve seen that every column and every expression in Pixeltable has an
associated **Pixeltable type**. In this section, we’ll briefly survey
the various Pixeltable types and their uses.

Here are all the supported types and their corresponding Python types:

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[28] }} />

The Python type is what you’ll get back if you query an expression of
the given Pixeltable type. For `pxt.Json`, it can be any of `str`,
`int`, `float`, `bool`, `list`, or `dict`.

<code>pxt.Audio</code>, <code>pxt.Video</code>, and
<code>pxt.Document</code> all correspond to the Python type
<code>str</code>. This is because those types are represented by file
paths that reference the media in question. When you query for, say,
<code>t.select(t.video_col)</code>, you’re guaranteed to get a file path
on the <i>local</i> filesystem (Pixeltable will download and cache a
local copy of the video if necessary to ensure this). If you want the
original URL, use <code>t.video_col.fileurl</code> instead.

Several types can be **specialized** to constrain the allowable data in
a column.

-   `pxt.Image` can be specialized with a resolution and/or an image
    mode:
    -   `pxt.Image[(300,200)]` - images with width 300 and height 200
    -   `pxt.Image['RGB']` - images with mode `'RGB'`; see the [PIL
        Documentation](https://pillow.readthedocs.io/en/stable/handbook/concepts.html)
        for the full list
    -   `pxt.Image[(300,200), 'RGB']` - combines the above constraints
-   `pxt.Array` can be specialized with a shape and/or a dtype:
    -   `pxt.Array[pxt.Float]` - arrays with dtype `pxt.Float`
    -   `pxt.Array[(64,64,3), pxt.Float]` - 3-dimensional arrays with
        dtype `pxt.Float` and 64x64x3 shape

If we look at the structure of our table now, we see examples of
specialized image and array types.


```python
t
```

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[29] }} />

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[30] }} />

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[31] }} />

<div dangerouslySetInnerHTML={{ __html: quartoRawHtml[32] }} />

`t.clip` has type `pxt.Array[(512,), pxt.Float]`, since the output of
the embedding is always a 1x512 array. `t.channel` has type
`Image['L']`, since it’s always an `'L'` mode (1-channel) image.

You can freely use <code>pxt.Image</code> by itself to mean “any image,
without constraints”, but numerical arrays must always specify a shape
and a dtype; <code>pxt.Array</code> by itself will raise an error.

Array shapes follow standard numpy conventions: a shape is a tuple of
integers, such as <code>(512,)</code> or <code>(64,64,3)</code>. A
<code>None</code> may be used in place of an integer to indicate an
unconstrained size for that dimension, as in <code>(None,None,3)</code>
(3-dimensional array with two unconstrained dimensions), or simply
<code>(None,)</code> (unconstrained 1-dimensional array).
